{"version":3,"file":"app.bundle.js","sources":["../src/core/module-loader.ts","../src/core/event-bus.ts","../src/core/dom-utils.ts","../src/modules/auth-module.ts","../src/modules.config.ts","../src/app.ts"],"sourcesContent":["/**\n * Cargador automático de módulos mediante atributos HTML\n * Permite inicializar módulos usando data-module sin código manual\n */\nexport class ModuleLoader {\n    private modules: Map<string, any>;\n    private instances: WeakMap<HTMLElement, any>;\n\n    constructor() {\n        this.modules = new Map();\n        this.instances = new WeakMap();\n    }\n\n    /**\n     * Registra un módulo para inicialización automática\n     * @param {string} name - Nombre del módulo (debe coincidir con data-module)\n     * @param {Function} ModuleClass - Clase del módulo a instanciar\n     * @returns {ModuleLoader} Instancia actual para encadenar llamadas\n     * @example\n     * moduleLoader.register('grid', GridModule)\n     *             .register('tabs', TabsModule);\n     */\n    register(name: string, ModuleClass: any) {\n        if (!name || typeof name !== 'string') {\n            console.error('Nombre de módulo inválido');\n            return;\n        }\n\n        if (typeof ModuleClass !== 'function') {\n            console.error(`\"${name}\" no es una clase válida`);\n            return;\n        }\n\n        if (this.modules.has(name)) {\n            console.warn(`Módulo \"${name}\" ya registrado, sobrescribiendo...`);\n        }\n        this.modules.set(name, ModuleClass);\n\n        return this;\n    }\n\n    /**\n     * Inicializa todos los módulos encontrados en el contexto\n     * Busca elementos con [data-module] y crea instancias automáticamente\n     * @param {Document | HTMLElement} [context=document] - Contexto de búsqueda\n     * @returns {number} Número de módulos inicializados exitosamente\n     * @example\n     * // Inicializar todos los módulos del documento\n     * moduleLoader.init();\n     * \n     * // Inicializar solo en un contenedor específico\n     * const container = document.querySelector('.dynamic-content');\n     * moduleLoader.init(container);\n     */\n    init(context: Document | HTMLElement = document) {\n        const elements: NodeListOf<HTMLElement> = context.querySelectorAll('[data-module]');\n        let initialized = 0;\n\n        elements.forEach(element => {\n            if (this.instances.has(element)) {\n                console.warn('Elemento ya inicializado, saltando...');\n                return;\n            }\n\n            const moduleName = element.dataset.module;\n\n            if (!this.modules.has(moduleName)) {\n                console.warn(`Módulo \"${moduleName}\" no registrado`);\n                return;\n            }\n\n            const ModuleClass = this.modules.get(moduleName);\n\n            try {\n                const newInstance = new ModuleClass(element);\n                this.instances.set(element, newInstance);\n                initialized++;  // ✅ Contar éxitos\n            } catch (error) {\n                console.error(`Error al inicializar \"${moduleName}\":`, error);\n            }\n        });\n\n        console.log(`✅ ${initialized} módulos inicializados`);\n        return initialized;\n    }\n\n    /**\n     * Destruye la instancia de módulo asociada a un elemento\n     * Llama al método destroy() de la instancia si existe y limpia referencias\n     * @param {HTMLElement} element - Elemento cuya instancia se debe destruir\n     * @example\n     * const element = document.querySelector('[data-module=\"grid\"]');\n     * moduleLoader.destroy(element);\n     */\n    destroy(element: HTMLElement) {\n        if (!this.instances.has(element)) {\n            return;\n        }\n        const instance = this.instances.get(element);\n        if (typeof instance.destroy === 'function') {\n            try {\n                instance.destroy();\n            } catch (error) {\n                console.error('Error al destruir módulo:', error);\n            }\n        }\n        this.instances.delete(element);\n    }\n}","/**\n * Sistema de eventos pub/sub para comunicación entre módulos\n */\nexport class EventBus {\n    private events: Map<string, Function[]>;\n    \n    constructor() {\n        this.events = new Map();\n    }\n\n    /**\n     * Suscribe un callback a un evento\n     * @param {string} eventName - Nombre del evento\n     * @param {Function} callback - Función a ejecutar cuando se emita el evento\n     * @returns {Function} Función para desuscribirse del evento\n     */\n    on(eventName: string, callback: Function) {\n        if (!this.events.has(eventName)) {\n            this.events.set(eventName, []);\n        };\n\n        /** @type {Function[]} */\n        const callbacks = this.events.get(eventName);\n        callbacks.push(callback);\n\n        return () => {\n            this.off(eventName, callback);\n        }\n    }\n\n    /**\n     * Desuscribe un callback de un evento\n     * @param {string} eventName - Nombre del evento\n     * @param {Function} callback - Función a eliminar\n     */\n    off(eventName: string, callback: Function) {\n        if (!this.events.has(eventName)) return;\n\n        const callbacks = this.events.get(eventName);\n        const filteredCallbacks = callbacks.filter(cb => cb !== callback);\n\n        this.events.set(eventName, filteredCallbacks);\n    }\n\n    /**\n     * Emite un evento y ejecuta todos los callbacks suscritos\n     * @param {string} eventName - Nombre del evento a emitir\n     * @param {...any} args - Argumentos a pasar a los callbacks\n     */\n    emit(eventName: string, ...args: any[]) {\n        if (!this.events.has(eventName)) return;\n\n        const callbacks = this.events.get(eventName);\n        callbacks.forEach(cb => {\n            try {\n                cb(...args);\n            } catch (error) {\n                console.warn('Error:', error);\n            }\n        })\n    }\n\n    /**\n     * Suscribe un callback que se ejecutará solo una vez\n     * @param {string} eventName - Nombre del evento\n     * @param {Function} callback - Función a ejecutar (se auto-desuscribe después)\n     */\n    once(eventName: string, callback: Function) {\n        if (!this.events.get(eventName)) {\n            this.events.set(eventName, []);\n        };\n\n        const wrapper = (...args) => {\n            callback(...args);\n            this.off(eventName, wrapper);\n        }\n\n        this.on(eventName, wrapper);\n    }\n}","/**\n * Utilidades para manipulación del DOM\n */\nexport class DomUtils {\n\n    /**\n     * Selecciona un elemento del DOM\n     * @param {string} selector - Selector CSS\n     * @param {Document | HTMLElement} [context=document] - Contexto de búsqueda\n     * @returns {HTMLElement | null} Elemento encontrado o null\n     */\n    select(selector: string, context: Document | HTMLElement = document) {\n        return context.querySelector(selector);\n    }\n\n    /**\n     * Selecciona todos los elementos que coincidan con el selector\n     * @param {string} selector - Selector CSS\n     * @param {Document | HTMLElement} [context=document] - Contexto de búsqueda\n     * @returns {NodeListOf<HTMLElement>} Lista de elementos encontrados\n     */\n    selectAll(selector: string, context: Document | HTMLElement = document) {\n        return context.querySelectorAll(selector);\n    }\n\n    /**\n     * Ejecuta un callback cuando el DOM esté listo\n     * @param {Function} callback - Función a ejecutar\n     */\n    ready(callback: () => void) {\n        if (document.readyState !== 'loading') {\n            callback();\n        } else {\n            document.addEventListener('DOMContentLoaded', callback);\n        }\n    }\n\n    /**\n     * Añade un event listener a un elemento\n     * @param {HTMLElement} element - Elemento del DOM\n     * @param {keyof HTMLElementEventMap} event - Nombre del evento\n     * @param {EventListener} handler - Función callback\n     */\n    on(element: HTMLElement | null, event: keyof HTMLElementEventMap, handler: EventListener) {\n        if (element == null) {\n            console.warn(`DomUtils.on: Element is null for event '${event}'`);\n            return;\n        }\n        element.addEventListener(event, handler);\n    }\n\n    /**\n     * Event delegation - escucha eventos en elementos hijos actuales y futuros\n     * @param {HTMLElement} parent - Elemento padre contenedor\n     * @param {string} selector - Selector CSS de los elementos hijos\n     * @param {keyof HTMLElementEventMap} event - Nombre del evento\n     * @param {EventListener} handler - Función callback (this será el elemento clickeado)\n     */\n    delegate(parent: HTMLElement, selector: string, event: keyof HTMLElementEventMap, handler: EventListener) {\n        parent.addEventListener(event, (e) => {\n            const target = (e.target as HTMLElement).closest(selector);  \n\n            if (target) {  \n                handler.call(target, e);  \n            }\n        });\n    }\n};","export class AuthModule {\n    private context: HTMLElement;\n\n    constructor(context: HTMLElement){\n        this.context = context\n        this.init();\n    }\n\n    submitForm() {\n        const form = this.context.querySelector('form');\n        form.action = '/Auth/Login';\n        form.method = 'POST';\n\n        console.log('Submitting form via AuthModule...', form);\n        document.body.appendChild(form);\n        form.submit();\n    }\n\n    addToWindownScope(): void {\n        if (!(window as any).nextAuth) {\n            (window as any).nextAuth = {};\n        }\n\n        (window as any).nextAuth.submitForm = this.submitForm.bind(this);\n    }\n\n    init() {\n        this.addToWindownScope();\n    }\n}","// modules.config.js\n// import { GridModule } from './modules/grid.js';\n// import { TabsModule } from './modules/tabs.js';\n// import { CarouselModule } from './modules/carousel.js';\n\nimport { AuthModule } from \"./modules/auth-module.ts\";\n\n/**\n * Configuración de módulos de la aplicación\n * Punto central para registrar todos los módulos disponibles\n */\nexport const APP_MODULES = {\n    // 'grid': GridModule,\n    // 'tabs': TabsModule,\n    // 'carousel': CarouselModule\n    'auth': AuthModule\n};","// app.js\nimport { ModuleLoader } from './core/module-loader.ts';\nimport { EventBus } from './core/event-bus.ts';\nimport { DomUtils } from './core/dom-utils.ts';\nimport { APP_MODULES } from './modules.config.ts';\n\nclass App {\n    private moduleLoader: ModuleLoader;\n    private eventBus: EventBus;\n    private dom: DomUtils;\n\n    constructor() {\n        this.moduleLoader = new ModuleLoader();\n        this.eventBus = new EventBus();\n        this.dom = new DomUtils();\n        \n        // Registrar módulos desde configuración\n        this.registerModules(APP_MODULES);\n    }\n    \n    /**\n     * Registra módulos desde un objeto de configuración\n     */\n    registerModules(modules) {\n        Object.entries(modules).forEach(([name, ModuleClass]) => {\n            this.moduleLoader.register(name, ModuleClass);\n        });\n    }\n    \n    start() {\n        this.dom.ready(() => {\n            this.moduleLoader.init();\n        });\n        return this;\n    }\n}\n\nconst app = new App();\napp.start();\n\n(window as any).app = app;\nexport default app;"],"names":["ModuleLoader","name","ModuleClass","context","elements","initialized","element","moduleName","newInstance","error","instance","EventBus","eventName","callback","filteredCallbacks","cb","args","wrapper","DomUtils","selector","event","handler","parent","e","target","AuthModule","form","APP_MODULES","App","modules","app"],"mappings":"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"}