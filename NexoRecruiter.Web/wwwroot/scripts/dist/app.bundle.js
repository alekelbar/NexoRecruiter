(function(){"use strict";class a{modules;instances;constructor(){this.modules=new Map,this.instances=new WeakMap}register(t,s){if(!t||typeof t!="string"){console.error("Nombre de módulo inválido");return}if(typeof s!="function"){console.error(`"${t}" no es una clase válida`);return}return this.modules.has(t)&&console.warn(`Módulo "${t}" ya registrado, sobrescribiendo...`),this.modules.set(t,s),this}init(t=document){const s=t.querySelectorAll("[data-module]");let e=0;return s.forEach(o=>{if(this.instances.has(o)){console.warn("Elemento ya inicializado, saltando...");return}const n=o.dataset.module;if(!this.modules.has(n)){console.warn(`Módulo "${n}" no registrado`);return}const i=this.modules.get(n);try{const c=new i(o);this.instances.set(o,c),e++}catch(c){console.error(`Error al inicializar "${n}":`,c)}}),console.log(`✅ ${e} módulos inicializados`),e}destroy(t){if(!this.instances.has(t))return;const s=this.instances.get(t);if(typeof s.destroy=="function")try{s.destroy()}catch(e){console.error("Error al destruir módulo:",e)}this.instances.delete(t)}}class d{events;constructor(){this.events=new Map}on(t,s){return this.events.has(t)||this.events.set(t,[]),this.events.get(t).push(s),()=>{this.off(t,s)}}off(t,s){if(!this.events.has(t))return;const o=this.events.get(t).filter(n=>n!==s);this.events.set(t,o)}emit(t,...s){if(!this.events.has(t))return;this.events.get(t).forEach(o=>{try{o(...s)}catch(n){console.warn("Error:",n)}})}once(t,s){this.events.get(t)||this.events.set(t,[]);const e=(...o)=>{s(...o),this.off(t,e)};this.on(t,e)}}class u{select(t,s=document){return s.querySelector(t)}selectAll(t,s=document){return s.querySelectorAll(t)}ready(t){document.readyState!=="loading"?t():document.addEventListener("DOMContentLoaded",t)}on(t,s,e){if(t==null){console.warn(`DomUtils.on: Element is null for event '${s}'`);return}t.addEventListener(s,e)}delegate(t,s,e,o){t.addEventListener(e,n=>{const i=n.target.closest(s);i&&o.call(i,n)})}}class h{context;constructor(t){this.context=t,this.init()}submitForm(){const t=this.context.querySelector("form");t.action="/Auth/Login",t.method="POST",console.log("Submitting form via AuthModule...",t),document.body.appendChild(t),t.submit()}addToWindownScope(){window.nextAuth||(window.nextAuth={}),window.nextAuth.submitForm=this.submitForm.bind(this)}init(){this.addToWindownScope()}}const f={auth:h};class m{moduleLoader;eventBus;dom;constructor(){this.moduleLoader=new a,this.eventBus=new d,this.dom=new u,this.registerModules(f)}registerModules(t){Object.entries(t).forEach(([s,e])=>{this.moduleLoader.register(s,e)})}start(){return this.dom.ready(()=>{this.moduleLoader.init()}),this}}const l=new m;l.start(),window.app=l})();
//# sourceMappingURL=app.bundle.js.map
